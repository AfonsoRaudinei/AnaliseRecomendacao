<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>An√°lise de Solo</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- CABE√áALHO -->
        <div class="header-card">
            <div class="header-grid">
                <div class="input-group">
                    <label>Produtor</label>
                    <input type="text" placeholder="Nome do produtor">
                </div>
                <div class="input-group">
                    <label>Fazenda</label>
                    <input type="text" placeholder="Nome da fazenda">
                </div>
                <div class="input-group">
                    <label>Cidade</label>
                    <input type="text" placeholder="Cidade/UF">
                </div>
                <div class="input-group">
                    <label>Talh√£o</label>
                    <input type="text" placeholder="Identifica√ß√£o do talh√£o">
                </div>
            </div>
        </div>

        <!-- AMOSTRAS -->
        <div class="analysis-section">
            <div style="display: flex; align-items: center; gap: 12px;">
                <div class="section-title" style="margin-bottom: 0;">Amostras</div>
                <div id="amostrasSelecionadasTags" style="display: flex; flex-wrap: wrap; gap: 6px; flex: 1;"></div>
                <div style="position: relative;">
                    <button class="btn-add-micro" id="btnAmostras" onclick="toggleDropdownAmostras(event)">+</button>
                    <div class="dropdown-amostras-menu" id="amostrasMenu">
                        <div class="amostra-item" onclick="toggleAmostra('a1', 'A1', this, event)">
                            <div class="checkbox-custom">
                                <svg class="checkmark" width="14" height="11" viewBox="0 0 14 11" fill="none">
                                    <path d="M1 5.5L5 9.5L13 1.5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <span>Amostra 01 - Talh√£o A</span>
                        </div>
                        <div class="amostra-item" onclick="toggleAmostra('a2', 'A2', this, event)">
                            <div class="checkbox-custom">
                                <svg class="checkmark" width="14" height="11" viewBox="0 0 14 11" fill="none">
                                    <path d="M1 5.5L5 9.5L13 1.5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <span>Amostra 02 - Talh√£o B</span>
                        </div>
                        <div class="amostra-item" onclick="toggleAmostra('a3', 'A3', this, event)">
                            <div class="checkbox-custom">
                                <svg class="checkmark" width="14" height="11" viewBox="0 0 14 11" fill="none">
                                    <path d="M1 5.5L5 9.5L13 1.5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <span>Amostra 03 - Talh√£o C</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- pH -->
        <div class="analysis-section">
            <div class="section-title">pH e Interfer√™ncia na Absor√ß√£o</div>
            <div class="metric-row">
                <span class="metric-label">pH</span>
                <input type="number" step="0.1" placeholder="0.0" min="0" max="14" oninput="updatePH(this)">
                <div class="status-bar">
                    <div class="status-indicator" id="ph-indicator"></div>
                </div>
            </div>
            <div class="interference-grid">
                <div class="nutrient-interference">
                    <div class="nutrient-name">N</div>
                    <div class="interference-value interference-neutral" id="int-n">--</div>
                </div>
                <div class="nutrient-interference">
                    <div class="nutrient-name">P</div>
                    <div class="interference-value interference-neutral" id="int-p">--</div>
                </div>
                <div class="nutrient-interference">
                    <div class="nutrient-name">K</div>
                    <div class="interference-value interference-neutral" id="int-k">--</div>
                </div>
                <div class="nutrient-interference">
                    <div class="nutrient-name">Ca</div>
                    <div class="interference-value interference-neutral" id="int-ca">--</div>
                </div>
                <div class="nutrient-interference">
                    <div class="nutrient-name">Mg</div>
                    <div class="interference-value interference-neutral" id="int-mg">--</div>
                </div>
                <div class="nutrient-interference">
                    <div class="nutrient-name">S</div>
                    <div class="interference-value interference-neutral" id="int-s">--</div>
                </div>
                <div class="nutrient-interference">
                    <div class="nutrient-name">Fe</div>
                    <div class="interference-value interference-neutral" id="int-fe">--</div>
                </div>
                <div class="nutrient-interference">
                    <div class="nutrient-name">Mn</div>
                    <div class="interference-value interference-neutral" id="int-mn">--</div>
                </div>
                <div class="nutrient-interference">
                    <div class="nutrient-name">Zn</div>
                    <div class="interference-value interference-neutral" id="int-zn">--</div>
                </div>
                <div class="nutrient-interference">
                    <div class="nutrient-name">Cu</div>
                    <div class="interference-value interference-neutral" id="int-cu">--</div>
                </div>
                <div class="nutrient-interference">
                    <div class="nutrient-name">B</div>
                    <div class="interference-value interference-neutral" id="int-b">--</div>
                </div>
                <div class="nutrient-interference">
                    <div class="nutrient-name">Mo</div>
                    <div class="interference-value interference-neutral" id="int-mo">--</div>
                </div>
            </div>
        </div>

        <!-- TEXTURA DO SOLO -->
        <div class="analysis-section">
            <div class="section-title">Textura do Solo</div>
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-bottom: 16px;">
                <div class="metric-row" style="margin-bottom: 0;">
                    <span class="metric-label">Areia (%)</span>
                    <input type="number" step="1" min="0" max="100" placeholder="0" id="inputAreia" oninput="updateAreia(this)">
                    <div class="status-bar" style="min-width: 80px; flex: 1;">
                        <div class="status-indicator" id="areia-indicator"></div>
                    </div>
                </div>
                <div class="metric-row" style="margin-bottom: 0;">
                    <span class="metric-label">Silte (%)</span>
                    <input type="number" step="1" min="0" max="100" placeholder="0" id="inputSilte" oninput="updateSilte(this)">
                    <div class="status-bar" style="min-width: 80px; flex: 1;">
                        <div class="status-indicator" id="silte-indicator"></div>
                    </div>
                </div>
                <div class="metric-row" style="margin-bottom: 0;">
                    <span class="metric-label">Argila (%)</span>
                    <input type="number" step="1" min="0" max="100" placeholder="0" id="inputArgila" oninput="updateArgila(this)">
                    <div class="status-bar" style="min-width: 80px; flex: 1;">
                        <div class="status-indicator" id="argila-indicator"></div>
                    </div>
                </div>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 12px; margin-bottom: 16px;">
                <div style="padding: 10px 12px; background: white; border: 1px solid #E5E7EB; border-radius: 8px;">
                    <div style="font-size: 0.7em; color: #6B7280; margin-bottom: 4px;">Total</div>
                    <div style="display: flex; align-items: center; gap: 6px;">
                        <span style="font-size: 1.3em; font-weight: 700; color: #1A1A1A;" id="totalTextura">0</span>
                        <span style="font-size: 0.85em; color: #6B7280;">%</span>
                        <span id="validacaoIcon" style="font-size: 1.1em;">‚óã</span>
                    </div>
                </div>
                <div style="padding: 10px 12px; background: white; border: 1px solid #E5E7EB; border-radius: 8px;">
                    <div style="font-size: 0.7em; color: #6B7280; margin-bottom: 4px;">Classe Textural</div>
                    <div style="font-size: 0.95em; font-weight: 600; color: #4ADE80;" id="classeTextural">-</div>
                </div>
            </div>
            <div style="margin-bottom: 12px;">
                <div style="font-size: 0.75em; font-weight: 600; color: #6B7280; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 0.5px;">Tipos de Solo Comuns</div>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px;">
                    <div id="cardArgiloso" class="card-tipo-solo" onclick="aplicarTipoSolo('argiloso')">
                        <div class="tipo-solo-icon">üü´</div>
                        <div class="tipo-solo-nome">ARGILOSO</div>
                        <div class="tipo-solo-desc">
                            <div>‚Ä¢ Textura fina e f√©rtil</div>
                            <div>‚Ä¢ Alta reten√ß√£o de √°gua</div>
                            <div>‚Ä¢ Suscet√≠vel √† compacta√ß√£o</div>
                        </div>
                        <div class="tipo-solo-composicao">
                            <div style="font-size: 0.65em; color: #9CA3AF; margin-bottom: 3px;">Composi√ß√£o t√≠pica:</div>
                            <div style="font-size: 0.7em; font-weight: 600;">Argila: 35-60%</div>
                        </div>
                    </div>
                    <div id="cardArenoso" class="card-tipo-solo" onclick="aplicarTipoSolo('arenoso')">
                        <div class="tipo-solo-icon">üü®</div>
                        <div class="tipo-solo-nome">ARENOSO</div>
                        <div class="tipo-solo-desc">
                            <div>‚Ä¢ Gr√£os vis√≠veis</div>
                            <div>‚Ä¢ Pouca reten√ß√£o de √°gua</div>
                            <div>‚Ä¢ Aduba√ß√£o frequente</div>
                        </div>
                        <div class="tipo-solo-composicao">
                            <div style="font-size: 0.65em; color: #9CA3AF; margin-bottom: 3px;">Composi√ß√£o t√≠pica:</div>
                            <div style="font-size: 0.7em; font-weight: 600;">Areia: 70-90%</div>
                        </div>
                    </div>
                    <div id="cardSiltoso" class="card-tipo-solo" onclick="aplicarTipoSolo('siltoso')">
                        <div class="tipo-solo-icon">üüß</div>
                        <div class="tipo-solo-nome">SILTOSO</div>
                        <div class="tipo-solo-desc">
                            <div>‚Ä¢ Textura fina e lisa</div>
                            <div>‚Ä¢ Fertilidade m√©dia</div>
                            <div>‚Ä¢ Baixa estabilidade</div>
                        </div>
                        <div class="tipo-solo-composicao">
                            <div style="font-size: 0.65em; color: #9CA3AF; margin-bottom: 3px;">Composi√ß√£o t√≠pica:</div>
                            <div style="font-size: 0.7em; font-weight: 600;">Silte: 60-80%</div>
                        </div>
                    </div>
                </div>
            </div>
            <div style="padding: 8px 12px; background: rgba(59, 130, 246, 0.05); border-left: 3px solid #3B82F6; border-radius: 6px;">
                <div style="font-size: 0.75em; color: #6B7280;">
                    <strong style="color: #3B82F6;">üí° Dica:</strong> Clique em um dos cards acima para aplicar valores t√≠picos daquele tipo de solo
                </div>
            </div>
        </div>

        <!-- SOMA DE BASES + Al + H -->
        <div class="analysis-section">
            <div class="section-title">Soma de Bases e Acidez</div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 12px;">
                <div class="metric-row" style="margin-bottom: 0;">
                    <span class="metric-label">Ca (cmolc/dm¬≥)</span>
                    <input type="number" step="0.1" placeholder="0.0" id="inputCa" oninput="updateCa(this); calcularSBCTC()">
                    <div class="status-bar" style="min-width: 120px; flex: 1;">
                        <div class="status-indicator" id="ca-indicator"></div>
                    </div>
                </div>
                <div class="metric-row" style="margin-bottom: 0;">
                    <span class="metric-label">Mg (cmolc/dm¬≥)</span>
                    <input type="number" step="0.1" placeholder="0.0" id="inputMg" oninput="updateMg(this); calcularSBCTC()">
                    <div class="status-bar" style="min-width: 120px; flex: 1;">
                        <div class="status-indicator" id="mg-indicator"></div>
                    </div>
                </div>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 12px;">
                <div class="metric-row" style="margin-bottom: 0;">
                    <span class="metric-label">K (cmolc/dm¬≥)</span>
                    <input type="number" step="0.01" placeholder="0.00" id="inputK" oninput="updateK(this); calcularSBCTC()">
                    <div class="status-bar" style="min-width: 120px; flex: 1;">
                        <div class="status-indicator" id="k-indicator"></div>
                    </div>
                </div>
                <div class="metric-row" style="margin-bottom: 0;">
                    <span class="metric-label">Na (cmolc/dm¬≥)</span>
                    <input type="number" step="0.01" placeholder="0.00" id="inputNa" oninput="calcularSBCTC()">
                    <div class="status-bar" style="min-width: 120px; flex: 1;">
                        <div class="status-indicator" id="na-indicator"></div>
                    </div>
                </div>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 12px;">
                <div class="metric-row" style="margin-bottom: 0;">
                    <span class="metric-label">Al (cmolc/dm¬≥)</span>
                    <input type="number" step="0.1" placeholder="0.0" id="inputAl" oninput="updateAl(this); calcularSBCTC()">
                    <div class="status-bar" style="min-width: 120px; flex: 1;">
                        <div class="status-indicator" id="al-indicator"></div>
                    </div>
                </div>
                <div class="metric-row" style="margin-bottom: 0;">
                    <span class="metric-label">H + Al (cmolc/dm¬≥)</span>
                    <input type="number" step="0.1" placeholder="0.0" id="inputHAl" oninput="updateHAl(this); calcularSBCTC()">
                    <div class="status-bar" style="min-width: 120px; flex: 1;">
                        <div class="status-indicator" id="hal-indicator"></div>
                    </div>
                </div>
            </div>
            <!-- CARDS DE SB, CTC e V% -->
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-top: 16px;">
                <div style="background: #4ADE80; border-radius: 8px; padding: 10px 12px; color: white;">
                    <div style="font-size: 0.65em; text-transform: uppercase; letter-spacing: 0.3px; opacity: 0.85; margin-bottom: 2px;">SB</div>
                    <div style="font-size: 1.4em; font-weight: 700; line-height: 1;" id="valorSB">0.00</div>
                </div>
                <div style="background: #3B82F6; border-radius: 8px; padding: 10px 12px; color: white;">
                    <div style="font-size: 0.65em; text-transform: uppercase; letter-spacing: 0.3px; opacity: 0.85; margin-bottom: 2px;">CTC</div>
                    <div style="font-size: 1.4em; font-weight: 700; line-height: 1;" id="valorCTC">0.00</div>
                </div>
                <div style="background: #F59E0B; border-radius: 8px; padding: 10px 12px; color: white;">
                    <div style="font-size: 0.65em; text-transform: uppercase; letter-spacing: 0.3px; opacity: 0.85; margin-bottom: 2px;">V%</div>
                    <div style="font-size: 1.4em; font-weight: 700; line-height: 1;" id="valorV">0</div>
                </div>
            </div>
            <!-- RELA√á√ïES DE BASES -->
            <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid #F3F4F6;">
                <div style="font-size: 0.7em; text-transform: uppercase; letter-spacing: 0.5px; color: #9CA3AF; margin-bottom: 10px;">Rela√ß√µes de Bases</div>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px;">
                    <div style="text-align: center;">
                        <div style="font-size: 0.75em; color: #6B7280; margin-bottom: 4px;">Ca/Mg</div>
                        <div style="font-size: 1.3em; font-weight: 700; color: #4ADE80; margin-bottom: 4px;" id="relacaoCaMg">--</div>
                        <div style="height: 4px; background: #F3F4F6; border-radius: 2px; overflow: hidden;">
                            <div id="barraCaMg" style="height: 100%; background: #4ADE80; width: 0%; transition: all 0.3s;"></div>
                        </div>
                        <div style="font-size: 0.65em; color: #9CA3AF; margin-top: 3px;" id="statusCaMg">3-5</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 0.75em; color: #6B7280; margin-bottom: 4px;">Ca/K</div>
                        <div style="font-size: 1.3em; font-weight: 700; color: #3B82F6; margin-bottom: 4px;" id="relacaoCaK">--</div>
                        <div style="height: 4px; background: #F3F4F6; border-radius: 2px; overflow: hidden;">
                            <div id="barraCaK" style="height: 100%; background: #3B82F6; width: 0%; transition: all 0.3s;"></div>
                        </div>
                        <div style="font-size: 0.65em; color: #9CA3AF; margin-top: 3px;" id="statusCaK">10-30</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 0.75em; color: #6B7280; margin-bottom: 4px;">Mg/K</div>
                        <div style="font-size: 1.3em; font-weight: 700; color: #F59E0B; margin-bottom: 4px;" id="relacaoMgK">--</div>
                        <div style="height: 4px; background: #F3F4F6; border-radius: 2px; overflow: hidden;">
                            <div id="barraMgK" style="height: 100%; background: #F59E0B; width: 0%; transition: all 0.3s;"></div>
                        </div>
                        <div style="font-size: 0.65em; color: #9CA3AF; margin-top: 3px;" id="statusMgK">3-10</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ENXOFRE -->
        <div class="analysis-section">
            <div class="section-title">Enxofre</div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                <div class="metric-row" style="margin-bottom: 0;">
                    <span class="metric-label">S (mg/dm¬≥)</span>
                    <input type="number" step="1" placeholder="0" oninput="updateS(this)">
                    <div class="status-bar" style="min-width: 120px; flex: 1;">
                        <div class="status-indicator" id="s-indicator"></div>
                    </div>
                </div>
                <div class="metric-row" style="margin-bottom: 0;">
                    <span class="metric-label">P-rem (mg/L)</span>
                    <input type="number" step="0.1" placeholder="0.0" oninput="updatePrem(this)">
                    <div class="status-bar" style="min-width: 120px; flex: 1;">
                        <div class="status-indicator" id="prem-indicator"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- BOT√ïES: CORRETIVO + POT√ÅSSIO -->
        <div class="button-group">
            <div style="position: relative;">
                <button class="recommend-btn" onclick="toggleMenuCorretivo()">Adicionar Corretivo</button>
                <div class="floating-menu" id="correctiveMenu">
                    <div class="menu-item" onclick="toggleCorrective('dolomitico')">
                        <span>Calc√°rio Dolom√≠tico</span>
                        <span class="checkmark">‚úì</span>
                    </div>
                    <div class="menu-item" onclick="toggleCorrective('calcitico')">
                        <span>Calc√°rio Calc√≠tico</span>
                        <span class="checkmark">‚úì</span>
                    </div>
                    <div class="menu-item" onclick="toggleCorrective('gesso')">
                        <span>Gesso Agr√≠cola</span>
                        <span class="checkmark">‚úì</span>
                    </div>
                </div>
            </div>
            <div style="position: relative;">
                <button class="recommend-btn" onclick="toggleMenuPotassio()">Indicar Pot√°ssio</button>
                <div class="floating-menu" id="potassioMenu">
                    <div class="menu-item" onclick="toggleNutrient('potassio', 'autor')">
                        <span>Autor</span>
                        <span class="checkmark">‚úì</span>
                    </div>
                    <div class="menu-item" onclick="toggleNutrient('potassio', 'tecnologia')">
                        <span>Tecnologia</span>
                        <span class="checkmark">‚úì</span>
                    </div>
                    <div class="menu-item" onclick="toggleNutrient('potassio', 'cultivar')">
                        <span>Cultivar</span>
                        <span class="checkmark">‚úì</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- CARD CALAGEM -->
        <div class="recommendation-card" id="cardCalagem">
            <div class="card-header">
                <div class="card-title">Calagem</div>
                <div class="card-controls">
                    <button class="control-btn" onclick="minimizeCard('cardCalagem')" title="Ocultar">‚àí</button>
                </div>
            </div>
            <div class="card-content" id="contentCalagem">
                <div class="form-section">
                    <div class="form-section-title">M√©todos de Calagem</div>
                    <select class="dropdown-clean">
                        <option value="">Selecione o m√©todo de calagem</option>
                        <option value="albrecht">Equil√≠brio Albrecht</option>
                        <option value="albrecht-mod">Equil√≠brio Albrecht Modificado (Y)</option>
                        <option value="saturacao">Satura√ß√£o por Bases (V%)</option>
                        <option value="embrapa">M√©todo tradicional (EMBRAPA)</option>
                        <option value="ncpt">M√©todo NCpT</option>
                    </select>
                </div>
                <div class="form-section">
                    <div class="form-section-title">N√≠vel Cr√≠tico (cmol/dm¬≥)</div>
                    <div class="input-grid-3">
                        <div class="input-field">
                            <label>Ca</label>
                            <input type="number" step="0.1" placeholder="0.0">
                        </div>
                        <div class="input-field">
                            <label>Mg</label>
                            <input type="number" step="0.1" placeholder="0.0">
                        </div>
                        <div class="input-field">
                            <label>K</label>
                            <input type="number" step="0.01" placeholder="0.00">
                        </div>
                    </div>
                </div>
                <div class="form-section">
                    <div class="form-section-title">Bases do Solo em %</div>
                    <div class="input-grid-2">
                        <div class="input-field">
                            <label>Ca %</label>
                            <input type="number" step="0.1" placeholder="0.0">
                        </div>
                        <div class="input-field">
                            <label>Mg %</label>
                            <input type="number" step="0.1" placeholder="0.0">
                        </div>
                        <div class="input-field">
                            <label>K %</label>
                            <input type="number" step="0.1" placeholder="0.0">
                        </div>
                        <div class="input-field">
                            <label>V % (Ca+Mg+K)</label>
                            <input type="number" step="0.1" placeholder="0.0">
                        </div>
                    </div>
                </div>
                <div class="form-section">
                    <div class="form-section-title">Elevar % das Bases</div>
                    <select class="dropdown-clean">
                        <option value="">Selecione a estrat√©gia</option>
                        <option value="padrao">Seguir a recomenda√ß√£o padr√£o</option>
                        <option value="elevar-nc">Elevar % das bases e sempre respeitar o NC</option>
                        <option value="elevar-proporcao">Elevar % das bases e manter a propor√ß√£o escolhida</option>
                    </select>
                </div>
                <div class="mini-card" id="miniDolomitico" style="display: none;">
                    <div class="mini-card-title">
                        Calc√°rio Dolom√≠tico
                        <button class="control-btn" onclick="removeCorrective('dolomitico')" title="Remover">√ó</button>
                    </div>
                    <div class="input-grid-3">
                        <div class="input-field"><label>Ca %</label><input type="number" step="0.1" placeholder="0.0"></div>
                        <div class="input-field"><label>Mg %</label><input type="number" step="0.1" placeholder="0.0"></div>
                        <div class="input-field"><label>Pr %</label><input type="number" step="0.1" placeholder="0.0"></div>
                        <div class="input-field"><label>PE %</label><input type="number" step="0.1" placeholder="0.0"></div>
                        <div class="input-field"><label>PRNT %</label><input type="number" step="0.1" placeholder="0.0"></div>
                    </div>
                    <div style="margin-top: 12px;">
                        <label style="font-size: 0.85em; color: #1D1D1F; display: block; margin-bottom: 6px;">Superf√≠cie</label>
                        <select class="dropdown-clean">
                            <option value="">Selecione o tipo de superf√≠cie</option>
                            <option value="superficial">Superficial</option>
                            <option value="niveladora">Niveladora</option>
                        </select>
                    </div>
                </div>
                <div class="mini-card" id="miniCalcitico" style="display: none;">
                    <div class="mini-card-title">
                        Calc√°rio Calc√≠tico
                        <button class="control-btn" onclick="removeCorrective('calcitico')" title="Remover">√ó</button>
                    </div>
                    <div class="input-grid-3">
                        <div class="input-field"><label>Ca %</label><input type="number" step="0.1" placeholder="0.0"></div>
                        <div class="input-field"><label>Mg %</label><input type="number" step="0.1" placeholder="0.0"></div>
                        <div class="input-field"><label>Pr %</label><input type="number" step="0.1" placeholder="0.0"></div>
                        <div class="input-field"><label>PE %</label><input type="number" step="0.1" placeholder="0.0"></div>
                        <div class="input-field"><label>PRNT %</label><input type="number" step="0.1" placeholder="0.0"></div>
                    </div>
                    <div style="margin-top: 12px;">
                        <label style="font-size: 0.85em; color: #1D1D1F; display: block; margin-bottom: 6px;">Superf√≠cie</label>
                        <select class="dropdown-clean">
                            <option value="">Selecione o tipo de superf√≠cie</option>
                            <option value="superficial">Superficial</option>
                            <option value="niveladora">Niveladora</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <!-- CARD GESSO -->
        <div class="recommendation-card" id="cardGesso">
            <div class="card-header">
                <div class="card-title">Gesso Agr√≠cola</div>
                <div class="card-controls">
                    <button class="control-btn" onclick="minimizeCard('cardGesso')" title="Ocultar">‚àí</button>
                    <button class="control-btn" onclick="removeCorrective('gesso')" title="Fechar">√ó</button>
                </div>
            </div>
            <div class="card-content" id="contentGesso">
                <div class="form-section">
                    <div class="form-section-title">M√©todos de Gessagem</div>
                    <div style="margin-bottom: 12px;">
                        <label style="font-size: 0.85em; color: #1D1D1F; display: block; margin-bottom: 6px;">Recomenda√ß√£o de Aplica√ß√£o de Gesso <span style="color: #FF3B30;">*</span></label>
                        <select class="dropdown-clean">
                            <option value="">Selecione o m√©todo de gessagem</option>
                            <option value="enxofre">Pela Necessidade de Enxofre (S)</option>
                            <option value="calcio-aluminio">Pelo M√©todo da Necessidade de C√°lcio (Ca) e Redu√ß√£o de Alum√≠nio (Al)</option>
                            <option value="sulfato">Pelo Teor de Sulfato (SO‚ÇÑ¬≤‚Åª) na √Ågua de Irriga√ß√£o</option>
                        </select>
                    </div>
                </div>
                <div class="form-section">
                    <div class="form-section-title">Caracter√≠sticas do Gesso</div>
                    <div class="input-grid-2">
                        <div class="input-field"><label>C√°lcio (Ca %)</label><input type="number" step="0.1" placeholder="0.0"></div>
                        <div class="input-field"><label>Enxofre (S %)</label><input type="number" step="0.1" placeholder="0.0"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- CARD POT√ÅSSIO -->
        <div class="recommendation-card" id="cardPotassio">
            <div class="card-header">
                <div class="card-title">üî∑ Indica√ß√£o de Pot√°ssio (K)</div>
                <div class="card-controls">
                    <button class="control-btn" onclick="minimizeCard('cardPotassio')" title="Ocultar">‚àí</button>
                    <button class="control-btn" onclick="removeNutrient('potassio')" title="Fechar">√ó</button>
                </div>
            </div>
            <div class="card-content" id="contentPotassio">
                <div style="background: #F5F5F7; padding: 16px; border-radius: 8px; margin-bottom: 16px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                        <span style="font-size: 0.9em; font-weight: 600; color: #1D1D1F;">Filtros de Reg√™ncia</span>
                    </div>
                    <div class="input-grid-2" style="margin-bottom: 16px;">
                        <div class="input-field">
                            <label>Tipo de Reg√™ncia</label>
                            <select class="dropdown-clean">
                                <option value="">Selecione o tipo</option>
                                <option value="tecnologia">Tecnologia</option>
                                <option value="autor">Autor</option>
                                <option value="cultivar">Cultivar</option>
                            </select>
                        </div>
                        <div class="input-field">
                            <label>Reg√™ncia Espec√≠fica</label>
                            <select class="dropdown-clean"><option value="">Selecione a op√ß√£o</option></select>
                        </div>
                    </div>
                    <div class="form-section">
                        <label style="font-size: 0.85em; color: #1D1D1F; font-weight: 500; display: block; margin-bottom: 8px;">M√©todo de Corre√ß√£o</label>
                        <select class="dropdown-clean" id="metodoPotassio" onchange="toggleCamposCorrecaoPotassio()">
                            <option value="">Selecione o m√©todo</option>
                            <option value="elevar-nc">Elevar pot√°ssio para N√≠vel cr√≠tico</option>
                            <option value="producao">Produ√ß√£o - Planta inteira</option>
                            <option value="exportacao">Exporta√ß√£o (Manuten√ß√£o)</option>
                        </select>
                    </div>
                    <div id="camposCorrecaoPotassio" style="display: none; background: #E8F5E9; padding: 16px; border-radius: 8px; margin-top: 16px; border: 1px solid #A5D6A7;">
                        <div class="input-grid-2">
                            <div class="input-field">
                                <label>Corre√ß√£o total do solo?</label>
                                <select class="dropdown-clean" id="correcaoTotalPotassio" onchange="togglePercentualPotassio()">
                                    <option value="">Selecione</option>
                                    <option value="sim">Sim</option>
                                    <option value="nao">N√£o</option>
                                </select>
                            </div>
                            <div class="input-field" id="percentualPotassio" style="display: none;">
                                <label>Percentual (%)</label>
                                <input type="number" step="0.1" placeholder="0.0" style="width: 100%;">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- F√ìSFORO -->
        <div class="analysis-section">
            <div class="section-title">F√≥sforo</div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 12px;">
                <div class="metric-row" style="margin-bottom: 0;">
                    <span class="metric-label">P Mehlich (mg/dm¬≥)</span>
                    <input type="number" step="0.1" placeholder="0.0" oninput="updatePMehlich(this)">
                    <div class="status-bar" style="min-width: 120px; flex: 1;">
                        <div class="status-indicator" id="pmehlich-indicator"></div>
                    </div>
                </div>
                <div class="metric-row" style="margin-bottom: 0;">
                    <span class="metric-label">P Resina (mg/dm¬≥)</span>
                    <input type="number" step="0.1" placeholder="0.0" oninput="updatePResina(this)">
                    <div class="status-bar" style="min-width: 120px; flex: 1;">
                        <div class="status-indicator" id="presina-indicator"></div>
                    </div>
                </div>
            </div>
            <div class="metric-row">
                <span class="metric-label">PR %</span>
                <input type="number" step="0.1" placeholder="0.0" oninput="updatePR(this)">
                <div class="status-bar" style="min-width: 120px; flex: 1;">
                    <div class="status-indicator" id="pr-indicator"></div>
                </div>
            </div>
        </div>

        <!-- BOT√ÉO F√ìSFORO -->
        <div style="position: relative; margin-top: 12px;">
            <button class="recommend-btn" onclick="toggleMenuFosforo()">Indicar F√≥sforo</button>
            <div class="floating-menu" id="fosforoMenu">
                <div class="menu-item" onclick="toggleNutrient('fosforo', 'autor')"><span>Autor</span><span class="checkmark">‚úì</span></div>
                <div class="menu-item" onclick="toggleNutrient('fosforo', 'tecnologia')"><span>Tecnologia</span><span class="checkmark">‚úì</span></div>
                <div class="menu-item" onclick="toggleNutrient('fosforo', 'cultivar')"><span>Cultivar</span><span class="checkmark">‚úì</span></div>
            </div>
        </div>

        <!-- CARD F√ìSFORO -->
        <div class="recommendation-card" id="cardFosforo">
            <div class="card-header">
                <div class="card-title">üî∑ Indica√ß√£o de F√≥sforo (P)</div>
                <div class="card-controls">
                    <button class="control-btn" onclick="minimizeCard('cardFosforo')" title="Ocultar">‚àí</button>
                    <button class="control-btn" onclick="removeNutrient('fosforo')" title="Fechar">√ó</button>
                </div>
            </div>
            <div class="card-content" id="contentFosforo">
                <div style="background: #F5F5F7; padding: 16px; border-radius: 8px; margin-bottom: 16px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                        <span style="font-size: 0.9em; font-weight: 600; color: #1D1D1F;">Filtros de Reg√™ncia</span>
                    </div>
                    <div class="input-grid-2" style="margin-bottom: 16px;">
                        <div class="input-field">
                            <label>Tipo de Reg√™ncia</label>
                            <select class="dropdown-clean">
                                <option value="">Selecione o tipo</option>
                                <option value="tecnologia">Tecnologia</option>
                                <option value="autor">Autor</option>
                                <option value="cultivar">Cultivar</option>
                            </select>
                        </div>
                        <div class="input-field">
                            <label>Reg√™ncia Espec√≠fica</label>
                            <select class="dropdown-clean"><option value="">Selecione a op√ß√£o</option></select>
                        </div>
                    </div>
                    <div class="form-section">
                        <label style="font-size: 0.85em; color: #1D1D1F; font-weight: 500; display: block; margin-bottom: 8px;">M√©todo de Corre√ß√£o</label>
                        <select class="dropdown-clean" id="metodoFosforo" onchange="toggleCamposCorrecaoFosforo()">
                            <option value="">Selecione o m√©todo</option>
                            <option value="elevar-nc">Elevar f√≥sforo para N√≠vel cr√≠tico</option>
                            <option value="producao">Produ√ß√£o - Planta inteira</option>
                            <option value="exportacao">Exporta√ß√£o (Manuten√ß√£o)</option>
                        </select>
                    </div>
                    <div id="camposCorrecaoFosforo" style="display: none; background: #E8F5E9; padding: 16px; border-radius: 8px; margin-top: 16px; border: 1px solid #A5D6A7;">
                        <div class="input-grid-2">
                            <div class="input-field">
                                <label>Corre√ß√£o total do solo?</label>
                                <select class="dropdown-clean" id="correcaoTotalFosforo" onchange="togglePercentualFosforo()">
                                    <option value="">Selecione</option>
                                    <option value="sim">Sim</option>
                                    <option value="nao">N√£o</option>
                                </select>
                            </div>
                            <div class="input-field" id="percentualFosforo" style="display: none;">
                                <label>Percentual (%)</label>
                                <input type="number" step="0.1" placeholder="0.0" style="width: 100%;">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ============================================ -->
        <!-- MICRONUTRIENTES - NOVO SISTEMA DE GRUPOS -->
        <!-- ============================================ -->
        <div class="analysis-section">
            <div class="section-title">Micronutrientes</div>
            
            <!-- Grid de inputs dos micronutrientes (SEM bot√µes individuais) -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 12px;">
                <div class="metric-row" style="margin-bottom: 0;">
                    <span class="metric-label">Mn (mg/dm¬≥)</span>
                    <input type="number" step="0.1" placeholder="0.0" id="inputMn" oninput="updateMn(this)">
                    <div class="status-bar" style="min-width: 100px; flex: 1;">
                        <div class="status-indicator" id="mn-indicator"></div>
                    </div>
                </div>
                <div class="metric-row" style="margin-bottom: 0;">
                    <span class="metric-label">Zn (mg/dm¬≥)</span>
                    <input type="number" step="0.1" placeholder="0.0" id="inputZn" oninput="updateZn(this)">
                    <div class="status-bar" style="min-width: 100px; flex: 1;">
                        <div class="status-indicator" id="zn-indicator"></div>
                    </div>
                </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 12px;">
                <div class="metric-row" style="margin-bottom: 0;">
                    <span class="metric-label">Cu (mg/dm¬≥)</span>
                    <input type="number" step="0.1" placeholder="0.0" id="inputCu" oninput="updateCu(this)">
                    <div class="status-bar" style="min-width: 100px; flex: 1;">
                        <div class="status-indicator" id="cu-indicator"></div>
                    </div>
                </div>
                <div class="metric-row" style="margin-bottom: 0;">
                    <span class="metric-label">Fe (mg/dm¬≥)</span>
                    <input type="number" step="0.1" placeholder="0.0" id="inputFe" oninput="updateFe(this)">
                    <div class="status-bar" style="min-width: 100px; flex: 1;">
                        <div class="status-indicator" id="fe-indicator"></div>
                    </div>
                </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 12px;">
                <div class="metric-row" style="margin-bottom: 0;">
                    <span class="metric-label">B (mg/dm¬≥)</span>
                    <input type="number" step="0.1" placeholder="0.0" id="inputB" oninput="updateB(this)">
                    <div class="status-bar" style="min-width: 100px; flex: 1;">
                        <div class="status-indicator" id="b-indicator"></div>
                    </div>
                </div>
                <div class="metric-row" style="margin-bottom: 0;">
                    <span class="metric-label">Mo (mg/dm¬≥)</span>
                    <input type="number" step="0.01" placeholder="0.00" id="inputMo" oninput="updateMo(this)">
                    <div class="status-bar" style="min-width: 100px; flex: 1;">
                        <div class="status-indicator" id="mo-indicator"></div>
                    </div>
                </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                <div class="metric-row" style="margin-bottom: 0;">
                    <span class="metric-label">Ni (mg/dm¬≥)</span>
                    <input type="number" step="0.01" placeholder="0.00" id="inputNi" oninput="updateNi(this)">
                    <div class="status-bar" style="min-width: 100px; flex: 1;">
                        <div class="status-indicator" id="ni-indicator"></div>
                    </div>
                </div>
                <div class="metric-row" style="margin-bottom: 0;">
                    <span class="metric-label">Se (mg/dm¬≥)</span>
                    <input type="number" step="0.01" placeholder="0.00" id="inputSe" oninput="updateSe(this)">
                    <div class="status-bar" style="min-width: 100px; flex: 1;">
                        <div class="status-indicator" id="se-indicator"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- BOT√ÉO CRIAR GRUPO DE MICRONUTRIENTES -->
        <div style="margin-top: 12px;">
            <button class="recommend-btn" onclick="criarGrupoMicro()">
                Criar Grupo de Recomenda√ß√£o
            </button>
        </div>

        <!-- CONTAINER DOS GRUPOS DE MICRONUTRIENTES -->
        <div id="containerGruposMicro">
            <!-- Grupos ser√£o adicionados aqui dinamicamente -->
        </div>

    </div>

    <script src="script.js"></script>
</body>
</html>
